---
title: 虎书笔记——Chapter4：Ray Tracing
tags:
  - 图形学
  - 虎书
categories:
  - 图形学
date: 2022-04-21 10:01:45
---

# 光线追踪

计算机图形学的基本任务之一就是*渲染*三维物体：将放置在3D空间中的场景、模型或者一系列组合的几何物体，渲染成从一个特定视角下观察场景所得到的2D图片。这和几百年来建筑师和工程师所做的事情一样，即通过绘画来和其他人交流自己的设计。
从本质上来说，渲染是一个以一组物体作为输入，然后产生一个像素数组作为输出的过程。不管怎样，渲染考虑了每个物体是如何贡献到每个像素点的，它通常有两种组织形式。在*对象顺序渲染中（object-order rendering）*，我们将轮流考虑每个物体，然后找到所有被它影响的像素，并更新这些像素的值。在*图像顺序渲染(image-order rendering)*中，我们将轮流考虑每个像素，然后找到影响该像素的所有物体，并以此来计算该像素的值。你可以从循环嵌套的角度来理解二者的差异：在图像顺序渲染中，“逐像素”循环是在外层的；而在对象顺序渲染中，“逐物体”的循环是在外层的。
> 如果输出的图像是一个矢量图而不是光栅化图像，那么渲染其实是不用涉及到像素的，但是在本书中，我们所说的图像都是指光栅化图像。

图像顺序和对象顺序渲染方法能够计算出完全相同的图像，但是它们适用于计算不同类型的效果，而且它们有着截然不同的性能特征。在讨论完这两种方法之后，我们将在第8章来对比性地讨论它们的优势。但是一般来说，图像顺序渲染的工作方式更简单，也可以产生更加复杂的效果，但是通常（但并不总是）需要更多的计算时间来生成一个相同的图像。
> 在一个光线追踪渲染器中，是可以很容易计算场景中的阴影和反射的，但是这对于对象顺序渲染来说则是很困难的。
> **批注：**这里所说的对象顺序渲染的一个具体例子是前向渲染(Forward Rendering)，这是一个逐物体逐光源的渲染过程；图像顺序渲染的一个具体例子是延迟渲染(Deferred Rendering)，这是一个逐像素的过程，在光栅化阶段会将所需要的场景物体信息记录在G Bffer中，然后再进行光照计算。

![图4.1](https://morakito-blog.oss-cn-beijing.aliyuncs.com/Fundamentals-of-Computer-Graphics-4th/Chapter-3/202206021205506.png)
> **图4.1**：光线在场景中进行“追踪”，第一个被光线击中的物体就是通过屏幕像素所看到的物体。在图中的例子中，三角形$T_2$就是通过像素所看到的物体。

光线追踪是一种用于渲染3D场景的图像顺序渲染算法，我们将第一个介绍它，这是因为它不需要开发其他的一些用于对象顺序渲染的数学工具也可以完成渲染任务。

